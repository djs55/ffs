#!/usr/bin/env python

import sys, urlparse
import xapi, xapi.datapath

class Implementation(xapi.datapath.Datapath_skeleton):
    def attach(self, dbg, uri, domain):
        u = urlparse.urlparse(uri)
        return {
            'domain_uuid': '0',
            'implementation': [ 'Qdisk', u.path ],
        }

if __name__ == "__main__":
    cmd = xapi.datapath.Datapath_commandline(Implementation())
    cmd.attach()
